"use strict";(self.webpackChunknancy_docs=self.webpackChunknancy_docs||[]).push([[5997],{2130:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"tutorials/first-tutorial/Examples/simple-computations","title":"Simple computations","description":"The examples shown in this page can be found, in notebook form, on GitHub.","source":"@site/docs/tutorials/first-tutorial/Examples/simple-computations.mdx","sourceDirName":"tutorials/first-tutorial/Examples","slug":"/tutorials/first-tutorial/Examples/simple-computations","permalink":"/nancy/docs/tutorials/first-tutorial/Examples/simple-computations","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"hide_title":true,"sidebar_position":1,"title":"Simple computations"},"sidebar":"tutorialSidebar","previous":{"title":"Operators","permalink":"/nancy/docs/tutorials/first-tutorial/operators"},"next":{"title":"Study of an IWRR tandem","permalink":"/nancy/docs/tutorials/first-tutorial/Examples/iwrr-tandem"}}');var n=t(4848),a=t(8453),s=t(9030);const o={hide_title:!0,sidebar_position:1,title:"Simple computations"},c="Simple computations",l={},u=[];function d(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"simple-computations",children:"Simple computations"})}),"\n",(0,n.jsx)(r.admonition,{type:"info",children:(0,n.jsxs)(r.p,{children:["The examples shown in this page can be found, in ",(0,n.jsx)(r.a,{href:"/docs/tutorials/getting-started/notebooks",children:"notebook"})," form, on ",(0,n.jsx)(r.a,{href:"https://github.com/rzippo/nancy/blob/master/examples/quick-intro.dib",children:"GitHub"}),"."]})}),"\n",(0,n.jsx)(r.p,{children:"The library can be used to compute delay and buffer bounds for any kind of curves."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csharp",children:"var sc = new RateLatencyServiceCurve(3, 3);\r\nvar ac = new SigmaRhoArrivalCurve(4, 1);\r\nvar delay = Curve.HorizontalDeviation(ac, sc);\r\n// Output: 13/3\n"})}),"\n",(0,n.jsxs)("figure",{children:[(0,n.jsx)("img",{src:(0,s.Ay)("/img/tutorials/rl-tb.png"),alt:"Plot of the arrival and service curves. The max horizontal deviation can be seen at y = 4."}),(0,n.jsxs)("figcaption",{children:["Figure 3: Plot of the arrival and service curves. The max horizontal deviation can be seen at ",(0,n.jsx)("code",{children:"y = 4"}),"."]})]}),"\n",(0,n.jsxs)(r.p,{children:["The calculation works also for general curves, for example (from ",(0,n.jsx)("a",{href:"/docs/tutorials/references#DNC18",children:"[DNC18, p. 121]"}),"):"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csharp",children:"var sc = Curve.Minimum(\r\n    new RateLatencyServiceCurve(0, 3),\r\n    new RateLatencyServiceCurve(4, 3) + 3\r\n);\r\nvar ac = new SigmaRhoArrivalCurve(1, 1);\r\nvar delay = Curve.HorizontalDeviation(ac, sc);\r\n// Output: 2/1\n"})}),"\n",(0,n.jsxs)("figure",{children:[(0,n.jsx)("img",{src:(0,s.Ay)("/img/tutorials/dnc p 121.png"),alt:"Plot of the arrival and service curves. The max horizontal deviation can be seen at y = 3."}),(0,n.jsxs)("figcaption",{children:["Figure 4: Plot of the arrival and service curves. The max horizontal deviation can be seen at ",(0,n.jsx)("code",{children:"y = 3"}),"."]})]}),"\n",(0,n.jsxs)(r.p,{children:["The operators can be used to naturally construct any min-plus expressions.\r\nFor example, computing a residual service curve in a FIFO server ",(0,n.jsx)("a",{href:"/docs/tutorials/references#DNC18",children:"[DNC18, p. 166]"}),":"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csharp",children:"var beta = new RateLatencyServiceCurve(2, 3);\r\nvar alpha = new SigmaRhoArrivalCurve(3, 2);\r\nvar theta = 4;\r\nvar delta_theta = new DelayServiceCurve(theta);\r\n\r\nvar alpha_theta = Curve.Convolution(alpha, delta_theta);\r\nvar diff = Curve.Subtraction(beta, alpha_theta, nonNegative: true);\r\nvar residual = Curve.Minimum(diff, delta_theta);\n"})}),"\n",(0,n.jsxs)("figure",{children:[(0,n.jsx)("img",{src:(0,s.Ay)("/img/tutorials/fifo-residual.png"),alt:"Plot of the FIFO residual service curve, computed with the code above."}),(0,n.jsx)("figcaption",{children:"Figure 5: Plot of the FIFO residual service curve, computed with the code above."})]}),"\n",(0,n.jsxs)(r.p,{children:["As another example, computing the strict service curve for Interleaved Weighted Round-Robin (IWRR) described in ",(0,n.jsx)("a",{href:"/docs/tutorials/references#TLBB21",children:"[TLBB21]"})," (using Th. 1 with the parameters in Fig. 3):"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-csharp",children:"var weights = new []{4, 6, 7, 10};\r\nvar l_min = new []{4096, 3072, 4608, 3072};\r\nvar l_max = new []{8704, 5632, 6656, 8192};\r\nvar beta = new RateLatencyServiceCurve(\r\n    delay: 0, \r\n    rate: 10000 // 10 Mb/s, but using ms as time unit\r\n);\r\nvar unit_rate = new RateLatencyServiceCurve(0, 1);\r\n\r\n// parameters computation omitted for brevity\r\nint Phi_i_j(int i, int j, int x) { ... }\r\nint Psi_i(int i, int x) { ... }\r\nint L_tot(int i) { ... }\r\n\r\nint i = 0; // the flow of interest\r\nvar stairs = new List<Curve>();\r\nfor(int k = 0; k < weights[i]; k++)\r\n{\r\n    var stair = new StairCurve(l_min[i], L_tot(i));\r\n    var delayed_stair = stair.DelayBy(Psi_i(i, k * l_min[i])); \r\n    stairs.Add(delayed_stair);\r\n}\r\nvar U_i = Curve.Addition(stairs); // summation of min-plus curves\r\nvar gamma_i = Curve.Convolution(unit_rate, U_i);\r\nvar beta_i = Curve.Composition(gamma_i, beta);\n"})}),"\n",(0,n.jsxs)("figure",{children:[(0,n.jsx)("img",{src:(0,s.Ay)("/img/tutorials/iwrr_sc.png"),alt:"Plot of the IWRR strict service curve, computed with the code above."}),(0,n.jsx)("figcaption",{children:"Figure 6: Plot of the IWRR strict service curve, computed with the code above."})]})]})}function h(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>s,x:()=>o});var i=t(6540);const n={},a=i.createContext(n);function s(e){const r=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),i.createElement(a.Provider,{value:r},e.children)}}}]);